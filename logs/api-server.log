
> api-server@0.0.1 start:dev
> nest start --watch

[2J[3J[H[[90m11:13:42 PM[0m] Starting compilation in watch mode...

[[90m11:14:01 PM[0m] Found 0 errors. Watching for file changes.

[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPrismaModule dependencies initialized[39m[38;5;3m +30ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigHostModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDiscoveryModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConfigModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mEventEmitterModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mWidgetSettingsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mUploadModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAutomationModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mJwtModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mChatModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mOrganizationModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mSitesModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatGateway subscribed to the "visitor:join" message[39m[38;5;3m +22ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatGateway subscribed to the "visitor:message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatGateway subscribed to the "admin:join" message[39m[38;5;3m +1ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatGateway subscribed to the "admin:message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatGateway subscribed to the "admin:get_unread_count" message[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatGateway subscribed to the "admin:mark_read" message[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/}:[39m[38;5;3m +1ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/, GET} route[39m[38;5;3m +2ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthController {/auth}:[39m[38;5;3m +1ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/google, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/register, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/login, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/google/callback, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/profile, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mOrganizationController {/organization}:[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/organization/my, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/organization/settings, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/organization/settings, PUT} route[39m[38;5;3m +1ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/organization/add-user, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mSitesController {/sites}:[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/sites, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/sites, GET} route[39m[38;5;3m +2ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/sites/invite, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mChatController {/chats}:[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chats/site/:siteId, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chats/:chatId/history, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chats/:chatId/clear, DELETE} route[39m[38;5;3m +1ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chats/:chatId, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chats/:chatId/rename, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAutomationController {/automation}:[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/automation/auto-replies/:siteId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/automation/auto-replies/:siteId, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/automation/auto-replies/:id, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/automation/auto-replies/:id, DELETE} route[39m[38;5;3m +2ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/automation/templates/:siteId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/automation/templates/:siteId/active, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/automation/templates/:siteId, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/automation/templates/:id, PATCH} route[39m[38;5;3m +2ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/automation/templates/:id, DELETE} route[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/automation/business-hours/:siteId, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/automation/business-hours/:siteId, PATCH} route[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/automation/business-hours/:siteId/status, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/automation/auto-reply/:siteId/:chatId, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/automation/seed/:siteId, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mWidgetSettingsController {/widget-settings}:[39m[38;5;3m +1ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/widget-settings/:organizationId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/widget-settings/:organizationId, PUT} route[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mUploadController {/upload}:[39m[38;5;3m +0ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/upload, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +94ms[39m
[31m[Nest] 182828  - [39m01/03/2026, 11:14:02 PM [31m  ERROR[39m [38;5;3m[NestApplication] [39m[31mError: listen EADDRINUSE: address already in use :::3000[39m[38;5;3m +3ms[39m
node:net:1937
    const ex = new UVExceptionWithHostPort(err, 'listen', address, port);
               ^

Error: listen EADDRINUSE: address already in use :::3000
    at Server.setupListenHandle [as _listen2] (node:net:1937:16)
    at listenInCluster (node:net:1994:12)
    at Server.listen (node:net:2099:7)
    at ExpressAdapter.listen (/home/ubuntuvm/Projects/ruslap/chatiq-mvp/api-server/node_modules/@nestjs/platform-express/adapters/express-adapter.js:127:32)
    at /home/ubuntuvm/Projects/ruslap/chatiq-mvp/api-server/node_modules/@nestjs/core/nest-application.js:188:30
    at new Promise (<anonymous>)
    at NestApplication.listen (/home/ubuntuvm/Projects/ruslap/chatiq-mvp/api-server/node_modules/@nestjs/core/nest-application.js:178:16)
    at async bootstrap (/home/ubuntuvm/Projects/ruslap/chatiq-mvp/api-server/src/main.ts:30:3) {
  code: 'EADDRINUSE',
  errno: -98,
  syscall: 'listen',
  address: '::',
  port: 3000
}

Node.js v22.14.0
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Client connected: -C6Hlo6qsocc7WREAAAB
Visitor v_vpt11q8v4b9mjys5ao7 joined room chat:8df94c53-1364-4bbd-99a4-f9a0ffb01f9a:v_vpt11q8v4b9mjys5ao7
Client connected: N98Rxs48uvAZjvJoAAAD
Admin joined room admin:8df94c53-1364-4bbd-99a4-f9a0ffb01f9a
Client connected: c9StrBoWSNBxZkx_AAAF
Admin joined room admin:8df94c53-1364-4bbd-99a4-f9a0ffb01f9a
[BusinessHours] Checking for siteId: 8df94c53-1364-4bbd-99a4-f9a0ffb01f9a
[BusinessHours] Current time: 11:13:44 PM
[BusinessHours] Current day: saturday
[BusinessHours] Schedule for saturday: { start: '09:00', end: '00:00', isOpen: true }
[BusinessHours] Checking for siteId: 8df94c53-1364-4bbd-99a4-f9a0ffb01f9a
[BusinessHours] Current time: 11:13:44 PM
[BusinessHours] Current day: saturday
[BusinessHours] Schedule for saturday: { start: '09:00', end: '00:00', isOpen: true }
Client disconnected: -C6Hlo6qsocc7WREAAAB
Client connected: azoNZMwLcx9Z59ZqAAAH
Visitor v_vpt11q8v4b9mjys5ao7 joined room chat:8df94c53-1364-4bbd-99a4-f9a0ffb01f9a:v_vpt11q8v4b9mjys5ao7
[BusinessHours] Checking for siteId: 8df94c53-1364-4bbd-99a4-f9a0ffb01f9a
[BusinessHours] Current time: 11:13:45 PM
[BusinessHours] Current day: saturday
[BusinessHours] Schedule for saturday: { start: '09:00', end: '00:00', isOpen: true }
[BusinessHours] Checking for siteId: 8df94c53-1364-4bbd-99a4-f9a0ffb01f9a
[BusinessHours] Current time: 11:13:45 PM
[BusinessHours] Current day: saturday
[BusinessHours] Schedule for saturday: { start: '09:00', end: '00:00', isOpen: true }
[BusinessHours] Checking for siteId: 8df94c53-1364-4bbd-99a4-f9a0ffb01f9a
[BusinessHours] Current time: 11:13:48 PM
[BusinessHours] Current day: saturday
[BusinessHours] Schedule for saturday: { start: '09:00', end: '00:00', isOpen: true }
[AutoReply] executeAutoReply called {
  siteId: '8df94c53-1364-4bbd-99a4-f9a0ffb01f9a',
  chatId: 'c9b065c8-c581-47d2-b04c-3244f593ef78',
  from: 'visitor'
}
[BusinessHours] Checking for siteId: 8df94c53-1364-4bbd-99a4-f9a0ffb01f9a
[BusinessHours] Current time: 11:13:51 PM
[BusinessHours] Current day: saturday
[BusinessHours] Schedule for saturday: { start: '09:00', end: '00:00', isOpen: true }
[AutoReply] Business status: { isOpen: true, message: undefined }
[AutoReply] Message count: 3
[ChatGateway] Updated visitor name to: –†—É—Å–ª–∞–Ω –õ (03.01 23:13)
Client disconnected: c9StrBoWSNBxZkx_AAAF
Client disconnected: N98Rxs48uvAZjvJoAAAD
Client connected: kK8YR1CdSnj6vKkvAAAK
Client connected: QFLkt7YRfKnbUq-3AAAL
Admin joined room admin:8df94c53-1364-4bbd-99a4-f9a0ffb01f9a
Admin joined room admin:8df94c53-1364-4bbd-99a4-f9a0ffb01f9a
[ChatController] Fetching history for chatId: "c9b065c8-c581-47d2-b04c-3244f593ef78"
[ChatController] Found 3 messages
[ChatController] Fetching history for chatId: "c9b065c8-c581-47d2-b04c-3244f593ef78"
[ChatController] Found 3 messages
