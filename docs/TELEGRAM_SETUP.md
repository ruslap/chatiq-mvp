# Telegram Integration Setup Guide

–Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Telegram —Å–ø–æ–≤—ñ—â–µ–Ω—å –¥–ª—è ChatIQ.

---

## –û–≥–ª—è–¥

Telegram —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –¥–æ–∑–≤–æ–ª—è—î –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –º–∏—Ç—Ç—î–≤—ñ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –Ω–æ–≤—ñ —á–∞—Ç–∏ —Ç–∞ –ª—ñ–¥–∏ –ø—Ä—è–º–æ –≤ Telegram. –ö–æ–∂–µ–Ω –æ–ø–µ—Ä–∞—Ç–æ—Ä –º–æ–∂–µ –ø—ñ–¥–ø–∏—Å–∞—Ç–∏—Å—è –Ω–∞ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è —á–µ—Ä–µ–∑ —Å–≤–æ–≥–æ Telegram –±–æ—Ç–∞.

---

## –ö—Ä–æ–∫ 1: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Telegram –±–æ—Ç–∞

### 1.1 –í—ñ–¥–∫—Ä–∏–π—Ç–µ BotFather

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Telegram
2. –ó–Ω–∞–π–¥—ñ—Ç—å `@BotFather` (–æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π –±–æ—Ç –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –±–æ—Ç—ñ–≤)
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **Start**

### 1.2 –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞

–í—ñ–¥–ø—Ä–∞–≤—Ç–µ –∫–æ–º–∞–Ω–¥—É:
```
/newbot
```

BotFather –∑–∞–ø–∏—Ç–∞—î:
1. **–ù–∞–∑–≤—É –±–æ—Ç–∞** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: "ChatIQ Notifications")
2. **Username –±–æ—Ç–∞** (–º–∞—î –∑–∞–∫—ñ–Ω—á—É–≤–∞—Ç–∏—Å—è –Ω–∞ `bot`, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥: `chatiq_notify_bot`)

### 1.3 –ó–±–µ—Ä–µ–∂—ñ—Ç—å —Ç–æ–∫–µ–Ω

BotFather –Ω–∞–¥–∞—Å—Ç—å –≤–∞–º **Bot Token** —É —Ñ–æ—Ä–º–∞—Ç—ñ:
```
1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
```

‚ö†Ô∏è **–í–ê–ñ–õ–ò–í–û:** –ó–±–µ—Ä—ñ–≥–∞–π—Ç–µ —Ç–æ–∫–µ–Ω —É –±–µ–∑–ø–µ—á–Ω–æ–º—É –º—ñ—Å—Ü—ñ. –ù–µ –ø—É–±–ª—ñ–∫—É–π—Ç–µ –π–æ–≥–æ!

---

## –ö—Ä–æ–∫ 2: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤ Admin Panel

### 2.1 –í—ñ–¥–∫—Ä–∏–π—Ç–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

1. –£–≤—ñ–π–¥—ñ—Ç—å –≤ Admin Panel (`https://admin.chtq.ink`)
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ **Settings** ‚Üí **–ö–∞–Ω–∞–ª–∏ –∑–≤'—è–∑–∫—É**
3. –ó–Ω–∞–π–¥—ñ—Ç—å —Å–µ–∫—Ü—ñ—é **Telegram**

### 2.2 –ü—ñ–¥–∫–ª—é—á—ñ—Ç—å –±–æ—Ç–∞

1. –í—Å—Ç–∞–≤—Ç–µ **Bot Token** –∑ –ö—Ä–æ–∫—É 1.3
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **–ü—ñ–¥–∫–ª—é—á–∏—Ç–∏**
3. –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç—å —Ç–æ–∫–µ–Ω —Ç–∞ –ø–æ–∫–∞–∂–µ **–∫–æ–¥ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è** (6 —Å–∏–º–≤–æ–ª—ñ–≤)

**–ü—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É:** `ABC123`

---

## –ö—Ä–æ–∫ 3: –ü—ñ–¥–ø–∏—Å–∫–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤

–ö–æ–∂–µ–Ω –æ–ø–µ—Ä–∞—Ç–æ—Ä, —è–∫–∏–π —Ö–æ—á–µ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è, –º–∞—î –≤–∏–∫–æ–Ω–∞—Ç–∏ –Ω–∞—Å—Ç—É–ø–Ω–µ:

### 3.1 –ó–Ω–∞–π–¥—ñ—Ç—å —Å–≤–æ–≥–æ –±–æ—Ç–∞

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Telegram
2. –ó–Ω–∞–π–¥—ñ—Ç—å –±–æ—Ç–∞ –∑–∞ username (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: `@chatiq_notify_bot`)
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **Start**

### 3.2 –í—ñ–¥–ø—Ä–∞–≤—Ç–µ –∫–æ–º–∞–Ω–¥—É –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

–í—ñ–¥–ø—Ä–∞–≤—Ç–µ –∫–æ–º–∞–Ω–¥—É –∑ **–∫–æ–¥–æ–º –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è** –∑ Admin Panel:
```
/start ABC123
```

–ó–∞–º—ñ–Ω—ñ—Ç—å `ABC123` –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω–∏–π –∫–æ–¥.

### 3.3 –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è

–ë–æ—Ç –≤—ñ–¥–ø–æ–≤—ñ—Å—Ç—å:
```
‚úÖ –í–∏ —É—Å–ø—ñ—à–Ω–æ –ø—ñ–¥–ø–∏—Å–∞–Ω—ñ –Ω–∞ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –¥–ª—è —Ü—å–æ–≥–æ —Å–∞–π—Ç—É!
```

---

## –ö—Ä–æ–∫ 4: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### 4.1 –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—ñ–¥–ø–∏—Å–∫–∏

–í Admin Panel ‚Üí Settings ‚Üí –ö–∞–Ω–∞–ª–∏ –∑–≤'—è–∑–∫—É ‚Üí Telegram:
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø—ñ–¥–ø–∏—Å–Ω–∏–∫—ñ–≤
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ –≤–∞—à username –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è

### 4.2 –°—Ç–≤–æ—Ä—ñ—Ç—å —Ç–µ—Å—Ç–æ–≤–∏–π —á–∞—Ç

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤–∞—à —Å–∞–π—Ç –∑ –≤—ñ–¥–∂–µ—Ç–æ–º
2. –í—ñ–¥–ø—Ä–∞–≤—Ç–µ —Ç–µ—Å—Ç–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ Telegram ‚Äî –º–∞—î –ø—Ä–∏–π—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è:

```
üÜï –ù–æ–≤–∏–π —á–∞—Ç!

üë§ –í—ñ–¥–≤—ñ–¥—É–≤–∞—á: –ê–Ω–æ–Ω—ñ–º
üí¨ –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: "–ü—Ä–∏–≤—ñ—Ç!"
üåê –°–∞–π—Ç: example.com
‚è∞ 14:30

[üì± –í—ñ–¥–∫—Ä–∏—Ç–∏ –≤ Admin Panel]
```

---

## –©–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç—å —É —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è—Ö?

### –ù–æ–≤–∏–π —á–∞—Ç
- –Ü–º'—è –≤—ñ–¥–≤—ñ–¥—É–≤–∞—á–∞
- –ü–µ—Ä—à–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- –ù–∞–∑–≤–∞ —Å–∞–π—Ç—É
- –ß–∞—Å
- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è —á–∞—Ç—É –≤ Admin Panel

### –ù–æ–≤–∏–π –∫–æ–Ω—Ç–∞–∫—Ç–Ω–∏–π –ª—ñ–¥
- –Ü–º'—è
- Email / –¢–µ–ª–µ—Ñ–æ–Ω
- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- –ù–∞–∑–≤–∞ —Å–∞–π—Ç—É
- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É –ª—ñ–¥—ñ–≤

---

## –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—ñ–¥–ø–∏—Å–∫–∞–º–∏

### –í—ñ–¥–ø–∏—Å–∞—Ç–∏—Å—è –≤—ñ–¥ —Å–ø–æ–≤—ñ—â–µ–Ω—å

–ù–∞—Ä–∞–∑—ñ –≤—ñ–¥–ø–∏—Å–∫–∞ –º–æ–∂–ª–∏–≤–∞ —Ç—ñ–ª—å–∫–∏ —á–µ—Ä–µ–∑ Admin Panel:
1. Settings ‚Üí –ö–∞–Ω–∞–ª–∏ –∑–≤'—è–∑–∫—É ‚Üí Telegram
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **–í—ñ–¥–∫–ª—é—á–∏—Ç–∏**

–¶–µ –≤—ñ–¥–∫–ª—é—á–∏—Ç—å –±–æ—Ç–∞ –¥–ª—è –≤—Å—å–æ–≥–æ —Å–∞–π—Ç—É.

### –î–æ–¥–∞—Ç–∏ –Ω–æ–≤–∏—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤

–ù–æ–≤—ñ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∏ –º–æ–∂—É—Ç—å –ø—ñ–¥–ø–∏—Å–∞—Ç–∏—Å—è —É –±—É–¥—å-—è–∫–∏–π –º–æ–º–µ–Ω—Ç:
1. –û—Ç—Ä–∏–º–∞—Ç–∏ **–∫–æ–¥ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è** –≤ Admin Panel
2. –í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ `/start –ö–û–î` –±–æ—Ç—É –≤ Telegram

---

## Troubleshooting

### –ë–æ—Ç –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –Ω–∞ /start

**–ü—Ä–∏—á–∏–Ω–∏:**
- –ù–µ–≤—ñ—Ä–Ω–∏–π Bot Token
- –ë–æ—Ç –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –≤ Admin Panel
- –ù–µ–≤—ñ—Ä–Ω–∏–π –∫–æ–¥ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

**–†—ñ—à–µ–Ω–Ω—è:**
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ç–æ–∫–µ–Ω –≤ Admin Panel
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ –±–æ—Ç –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π (–∑–µ–ª–µ–Ω–∏–π —Å—Ç–∞—Ç—É—Å)
3. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∞–∫—Ç—É–∞–ª—å–Ω–∏–π –∫–æ–¥ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è

### –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç—å

**–ü—Ä–∏—á–∏–Ω–∏:**
- –û–ø–µ—Ä–∞—Ç–æ—Ä –Ω–µ –ø—ñ–¥–ø–∏—Å–∞–Ω–∏–π
- Webhook –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π
- –ë–æ—Ç –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º

**–†—ñ—à–µ–Ω–Ω—è:**
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å–ø–∏—Å–æ–∫ –ø—ñ–¥–ø–∏—Å–Ω–∏–∫—ñ–≤ –≤ Admin Panel
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ `TELEGRAM_WEBHOOK_DOMAIN` –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π –≤ `.env`
3. –†–æ–∑–±–ª–æ–∫—É–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram (—è–∫—â–æ –±–ª–æ–∫—É–≤–∞–ª–∏)

### Webhook –ø–æ–º–∏–ª–∫–∏

–Ø–∫—â–æ webhook –Ω–µ –ø—Ä–∞—Ü—é—î, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ:
```bash
# –í .env —Ñ–∞–π–ª—ñ api-server
TELEGRAM_WEBHOOK_DOMAIN=https://api.chtq.ink
```

–î–æ–º–µ–Ω –º–∞—î –±—É—Ç–∏ –ø—É–±–ª—ñ—á–Ω–æ –¥–æ—Å—Ç—É–ø–Ω–∏–º —á–µ—Ä–µ–∑ HTTPS.

---

## –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

```
Telegram Bot
    ‚Üì
Webhook ‚Üí API Server (/telegram/webhook/:siteId)
    ‚Üì
TelegramWebhookController
    ‚Üì
–û–±—Ä–æ–±–∫–∞ /start –∫–æ–º–∞–Ω–¥–∏
    ‚Üì
–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø—ñ–¥–ø–∏—Å–∫–∏ –≤ –ë–î
```

### –ó–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è

```bash
# api-server/.env
TELEGRAM_WEBHOOK_DOMAIN=https://api.chtq.ink
ADMIN_PANEL_URL=https://admin.chtq.ink
```

### API Endpoints

| Endpoint | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å |
|----------|-------|------|
| `/telegram/setup` | POST | –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –±–æ—Ç–∞ |
| `/telegram/status/:siteId` | GET | –°—Ç–∞—Ç—É—Å —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó |
| `/telegram/disconnect/:siteId` | DELETE | –í—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –±–æ—Ç–∞ |
| `/telegram/subscribers/:siteId` | GET | –°–ø–∏—Å–æ–∫ –ø—ñ–¥–ø–∏—Å–Ω–∏–∫—ñ–≤ |
| `/telegram/webhook/:siteId` | POST | Webhook –¥–ª—è Telegram |

---

## –ë–µ–∑–ø–µ–∫–∞

‚ö†Ô∏è **–í–∞–∂–ª–∏–≤—ñ –ø—Ä–∞–≤–∏–ª–∞:**

1. **–ù—ñ–∫–æ–ª–∏ –Ω–µ –ø—É–±–ª—ñ–∫—É–π—Ç–µ Bot Token**
2. –ó–±–µ—Ä—ñ–≥–∞–π—Ç–µ —Ç–æ–∫–µ–Ω –≤ `.env` —Ñ–∞–π–ª—ñ
3. –ù–µ –¥–æ–¥–∞–≤–∞–π—Ç–µ `.env` –≤ git
4. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ HTTPS –¥–ª—è webhook
5. –†–µ–≥—É–ª—è—Ä–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ —Å–ø–∏—Å–æ–∫ –ø—ñ–¥–ø–∏—Å–Ω–∏–∫—ñ–≤

---

## –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º–∏:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ API Server: `docker compose logs api-server`
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞—Ç—É—Å —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –≤ Admin Panel
3. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ webhook –¥–æ–º–µ–Ω –¥–æ—Å—Ç—É–ø–Ω–∏–π

---

**–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä –≤–∏ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏–º–µ—Ç–µ –º–∏—Ç—Ç—î–≤—ñ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –Ω–æ–≤—ñ —á–∞—Ç–∏ –≤ Telegram. üöÄ
